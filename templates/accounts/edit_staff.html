{% extends 'registration/base.html' %}

{% block content %}

<style>
  *, *::before, *::after {
    font-family: "Montserrat", sans-serif !important;
  }

  body {
    background-color: #f8fafc;
  }
  
  /* Style for date input */
  input[type="date"]::-webkit-calendar-picker-indicator {
    cursor: pointer;
    opacity: 0.6;
    transition: 0.2s;
  }
  
  input[type="date"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }
  
  /* Custom toggle switch */
  .toggle-checkbox:checked {
    right: 0;
    border-color: #3b82f6;
  }
  .toggle-checkbox:checked + .toggle-label {
    background-color: #3b82f6;
  }
</style>

<div class="min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-2xl w-full bg-white p-10 rounded-2xl shadow-2xl border border-gray-200">
        <h2 class="text-3xl font-extrabold text-blue-700 mb-8 text-center">Edit Staff Account</h2>

        <form method="post" class="space-y-8">
            {% csrf_token %}

            <!-- Account Information -->
            <div class="border-b border-gray-200 pb-4 mb-4">
                <h3 class="text-lg font-medium text-gray-700 mb-4">Account Information</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <!-- Username -->
                    <div class="relative">
                        <input type="text" name="username" id="id_username"
                               value="{{ form.username.value|default:'' }}"
                               placeholder=" "
                               class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 pt-5 pb-2 text-gray-900 placeholder-transparent focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"/>
                        <label for="id_username" class="absolute left-4 top-2 text-gray-500 text-sm transition-all 
                            peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base 
                            peer-focus:top-2 peer-focus:text-blue-600 peer-focus:text-sm">
                            Username
                        </label>
                        {% if form.username.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ form.username.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Email -->
                    <div class="relative">
                        <input type="email" name="email" id="id_email"
                               value="{{ form.email.value|default:'' }}"
                               placeholder=" "
                               class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 pt-5 pb-2 text-gray-900 placeholder-transparent focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"/>
                        <label for="id_email" class="absolute left-4 top-2 text-gray-500 text-sm transition-all 
                            peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base 
                            peer-focus:top-2 peer-focus:text-blue-600 peer-focus:text-sm">
                            Email
                        </label>
                        {% if form.email.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ form.email.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- First Name -->
                    <div class="relative">
                        <input type="text" name="first_name" id="id_first_name"
                               value="{{ form.first_name.value|default:'' }}"
                               placeholder=" "
                               class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 pt-5 pb-2 text-gray-900 placeholder-transparent focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"/>
                        <label for="id_first_name" class="absolute left-4 top-2 text-gray-500 text-sm transition-all 
                            peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base 
                            peer-focus:top-2 peer-focus:text-blue-600 peer-focus:text-sm">
                            First Name
                        </label>
                        {% if form.first_name.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ form.first_name.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Last Name -->
                    <div class="relative">
                        <input type="text" name="last_name" id="id_last_name"
                               value="{{ form.last_name.value|default:'' }}"
                               placeholder=" "
                               class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 pt-5 pb-2 text-gray-900 placeholder-transparent focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"/>
                        <label for="id_last_name" class="absolute left-4 top-2 text-gray-500 text-sm transition-all 
                            peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base 
                            peer-focus:top-2 peer-focus:text-blue-600 peer-focus:text-sm">
                            Last Name
                        </label>
                        {% if form.last_name.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ form.last_name.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Job Information -->
            <div class="space-y-4">
                <h3 class="text-lg font-medium text-gray-700 mb-4">Job Information</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <!-- Role Dropdown -->
                    <div class="relative">
                        <select name="role" id="id_role"
                                class="peer block w-full appearance-none rounded-lg border border-gray-300 bg-transparent px-4 pt-5 pb-2 text-gray-900 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                            <option value="" disabled {% if not form.role.value %}selected{% endif %}>-- Select Role --</option>
                            {% for value, label in form.fields.role.choices %}
                                {% if value != "customer" %}
                                <option value="{{ value }}" {% if form.role.value == value %}selected{% endif %}>
                                    {{ label }}
                                </option>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <label for="id_role" class="absolute left-4 top-2 text-gray-500 text-sm transition-all 
                            peer-focus:top-2 peer-focus:text-blue-600 peer-focus:text-sm 
                            peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base">
                            Role
                        </label>
                        {% if form.role.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ form.role.errors.0 }}</p>
                        {% endif %}
                    </div>

                    <!-- Date Hired -->
                    <div class="relative">
                        <input type="date" name="date_hired" id="id_date_hired"
                               value="{{ form.date_hired.value|date:'Y-m-d' }}"
                               placeholder=" "
                               class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 pt-5 pb-2 text-gray-900 placeholder-transparent focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"/>
                        <label for="id_date_hired" class="absolute left-4 top-2 text-gray-500 text-sm transition-all 
                            peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base 
                            peer-focus:top-2 peer-focus:text-blue-600 peer-focus:text-sm">
                            Date Hired
                        </label>
                        {% if form.date_hired.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ form.date_hired.errors.0 }}</p>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Phone Number -->
                <div class="relative mb-4">
                    <input type="tel" name="phone" id="id_phone"
                           value="{{ form.phone.value|default:'' }}"
                           placeholder=" "
                           class="peer block w-full rounded-lg border border-gray-300 bg-transparent px-4 pt-5 pb-2 text-gray-900 placeholder-transparent focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"/>
                    <label for="id_phone" class="absolute left-4 top-2 text-gray-500 text-sm transition-all 
                        peer-placeholder-shown:top-5 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base 
                        peer-focus:top-2 peer-focus:text-blue-600 peer-focus:text-sm">
                        Phone Number
                    </label>
                    {% if form.phone.errors %}
                    <p class="text-red-600 text-xs mt-1">{{ form.phone.errors.0 }}</p>
                    {% endif %}
                </div>

                <!-- Active Status Toggle -->
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200">
                    <span class="text-gray-700">Account Status</span>
                    <div class="relative inline-block w-12 mr-2 align-middle select-none">
                        <input type="checkbox" name="is_active" id="id_is_active" 
                               {% if form.is_active.value %}checked{% endif %}
                               class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
                        <label for="id_is_active" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
                    </div>
                    <span class="ml-2 text-sm {% if form.is_active.value %}text-green-600{% else %}text-red-600{% endif %}">
                        {% if form.is_active.value %}Active{% else %}Inactive{% endif %}
                    </span>
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit"
                class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700
                       text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition duration-300 transform hover:scale-105">
                Save Changes
            </button>
        </form>

        <div class="mt-8 text-center">
            <a href="{% url 'staff_list' %}" 
               class="inline-block text-blue-600 hover:text-blue-800 font-medium transition duration-200">
                ← Back to Staff List
            </a>
        </div>
    </div>
</div>

{% endblock %}