{% extends 'base.html' %}

{% block title %}Medicine List{% endblock title %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

<div class="container my-5">
  <h2 class="text-center mb-4">All Medicines</h2>
  <div class="text-center mb-4">
    <a href="{% url 'medicine_table' %}" class="btn btn-outline-primary">View as Table</a>
  </div>
  <div class="row g-4">
    {% if medicine %}
      {% for med in medicine %}
        <div class="col-md-6 col-lg-4">
          <div class="card shadow-sm h-100">
            <div class="card-header bg-primary text-white">
              <strong>{{ med.name }}</strong>
              {% if med.near_expiry %}
                <span class="badge bg-danger">Near Expiry!</span>
              {% endif %}
              {% if med.low_stock %}
                <span class="badge bg-warning text-dark">Low Stock!</span>
              {% endif %}
            </div>
            <div class="card-body">
              <p><strong>Batch:</strong> {{ med.batch_number }}</p>
              <p><strong>Brand:</strong> {{ med.brand }}</p>
              <p><strong>Category:</strong> {{ med.category }}</p>
              <p><strong>Dosage:</strong> {{ med.dosage }}</p>
              <p><strong>Quantity:</strong> {{ med.quantity_in_stock }}</p>
            </div>
            <div class="card-footer d-flex justify-content-between">
              <a href="{% url 'medicine_update' med.id %}" class="btn btn-success btn-sm">Update</a>
              <a href="{% url 'medicine_delete' med.id %}" class="btn btn-danger btn-sm"
                 onclick="return confirm('Are you sure you want to delete this medicine?');">Delete</a>
            </div>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <div class="col-12">
        <div class="alert alert-info text-center">No medicines found.</div>
      </div>
    {% endif %}
  </div>
  <div class="text-center mt-4">
    <a href="{% url 'medicine_create' %}" class="btn btn-primary">âž• Add New Medicine</a>
  </div>
</div>
{% endblock content %}